"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[311],{7311:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});s(7658);var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"about"},[t("h1",[e._v(e._s(e.id?"编辑":"新建")+"英雄")]),t("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[t("el-tabs",{attrs:{value:"basicInfo",type:"border-card"}},[t("el-tab-pane",{attrs:{name:"basicInfo",label:"基础信息"}},[t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),t("el-form-item",{attrs:{label:"称号"}},[t("el-input",{model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),t("el-form-item",{attrs:{label:"头像"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":t=>e.$set(this.model,"avatar",t.url)}},[e.model.avatar?t("img",{staticClass:"avatar",attrs:{src:e.model.avatar}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"海报"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":t=>e.$set(this.model,"banner",t.url)}},[e.model.banner?t("img",{staticClass:"avatar",attrs:{src:e.model.banner}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"类型"}},[t("el-select",{attrs:{multiple:""},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return t("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),t("el-form-item",{attrs:{label:"难度"}},[t("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.difficult,callback:function(t){e.$set(e.model.scores,"difficult",t)},expression:"model.scores.difficult"}})],1),t("el-form-item",{attrs:{label:"技能"}},[t("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.skills,callback:function(t){e.$set(e.model.scores,"skills",t)},expression:"model.scores.skills"}})],1),t("el-form-item",{attrs:{label:"攻击"}},[t("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.attack,callback:function(t){e.$set(e.model.scores,"attack",t)},expression:"model.scores.attack"}})],1),t("el-form-item",{attrs:{label:"生存"}},[t("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.survive,callback:function(t){e.$set(e.model.scores,"survive",t)},expression:"model.scores.survive"}})],1),t("el-form-item",{attrs:{label:"顺风出装"}},[t("el-select",{attrs:{filterable:"",multiple:""},model:{value:e.model.items1,callback:function(t){e.$set(e.model,"items1",t)},expression:"model.items1"}},e._l(e.items,(function(e){return t("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),t("el-form-item",{attrs:{label:"逆风出装"}},[t("el-select",{attrs:{filterable:"",multiple:""},model:{value:e.model.items2,callback:function(t){e.$set(e.model,"items2",t)},expression:"model.items2"}},e._l(e.items,(function(e){return t("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),t("el-form-item",{attrs:{label:"使用技巧"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.model.usageTips,callback:function(t){e.$set(e.model,"usageTips",t)},expression:"model.usageTips"}})],1),t("el-form-item",{attrs:{label:"对抗技巧"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.model.battleTips,callback:function(t){e.$set(e.model,"battleTips",t)},expression:"model.battleTips"}})],1),t("el-form-item",{attrs:{label:"团战技巧"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.model.teamTips,callback:function(t){e.$set(e.model,"teamTips",t)},expression:"model.teamTips"}})],1)],1),t("el-tab-pane",{attrs:{label:"技能",name:"skills"}},[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.model.skills.push({})}}},[t("i",{staticClass:"el-icon-plus"}),e._v(" 添加技能 ")]),t("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.skills,(function(s,l){return t("el-col",{key:l,attrs:{md:12}},[t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{model:{value:s.name,callback:function(t){e.$set(s,"name",t)},expression:"item.name"}})],1),t("el-form-item",{attrs:{label:"图标"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,headers:e.getAuthHeaders(),"show-file-list":!1,"on-success":t=>e.$set(s,"icon",t.url)}},[s.icon?t("img",{staticClass:"avatar",attrs:{src:s.icon}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"冷却"}},[t("el-input",{model:{value:s.cooldown,callback:function(t){e.$set(s,"cooldown",t)},expression:"item.cooldown"}})],1),t("el-form-item",{attrs:{label:"消耗"}},[t("el-input",{model:{value:s.consume,callback:function(t){e.$set(s,"consume",t)},expression:"item.consume"}})],1),t("el-form-item",{attrs:{label:"描述"}},[t("el-input",{attrs:{type:"textarea"},model:{value:s.description,callback:function(t){e.$set(s,"description",t)},expression:"item.description"}})],1),t("el-form-item",{attrs:{label:"小提示"}},[t("el-input",{attrs:{type:"textarea"},model:{value:s.tips,callback:function(t){e.$set(s,"tips",t)},expression:"item.tips"}})],1),t("el-form-item",[t("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.skills.splice(l,1)}}},[e._v("删除")])],1)],1)})),1)],1),t("el-tab-pane",{attrs:{label:"最佳搭档",name:"partners"}},[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.model.partners.push({})}}},[t("i",{staticClass:"el-icon-plus"}),e._v(" 添加英雄 ")]),t("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.partners,(function(s,l){return t("el-col",{key:l,attrs:{md:12}},[t("el-form-item",{attrs:{label:"英雄"}},[t("el-select",{attrs:{filterable:""},model:{value:s.hero,callback:function(t){e.$set(s,"hero",t)},expression:"partner.hero"}},e._l(e.heroes,(function(e){return t("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),t("el-form-item",{attrs:{label:"描述"}},[t("el-input",{attrs:{type:"textarea"},model:{value:s.description,callback:function(t){e.$set(s,"description",t)},expression:"partner.description"}})],1),t("el-form-item",[t("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.partners.splice(l,1)}}},[e._v("删除")])],1)],1)})),1)],1)],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-top":"1rem"},attrs:{type:"primary","native-type":"submit"}},[e._v(" 保存 ")])],1)],1)],1)},a=[],r=s(9328),i={props:{id:{}},data(){return{model:{scores:{difficult:0,skills:0,attack:0,survive:0},skills:[],partners:[]},categories:[],items:[],heroes:[]}},methods:{async save(){let e;this.id?(e=await(0,r.bX)(this.model,this.id),this.$router.push("/heroes/list"),this.$message({type:"success",message:"更新成功"})):(e=await(0,r.gM)(this.model),this.$router.push("/heroes/list"),this.$message({type:"success",message:"保存成功"}))},async fetch(){let e=await(0,r.iH)(this.id);this.model=Object.assign({},this.model,e.data)},async fetchCategories(){let e=await(0,r.AT)();this.categories=e.data},async fetchItems(){let e=await(0,r.mC)();this.items=e.data},async fetchHeroes(){let e=await(0,r.$c)();this.heroes=e.data}},created(){this.fetchItems(),this.fetchCategories(),this.fetchHeroes(),this.id&&this.fetch()}},o=i,n=s(1001),c=(0,n.Z)(o,l,a,!1,null,null,null),u=c.exports},9328:function(e,t,s){s.d(t,{$c:function(){return v},AT:function(){return o},Af:function(){return A},Ai:function(){return w},DA:function(){return y},HK:function(){return c},K8:function(){return M},Ns:function(){return $},PF:function(){return p},Qo:function(){return b},Vr:function(){return Z},Vz:function(){return u},Xd:function(){return _},Xt:function(){return I},a4:function(){return z},ax:function(){return n},bX:function(){return k},cT:function(){return a},gM:function(){return h},hc:function(){return H},i8:function(){return i},iH:function(){return g},jX:function(){return m},kB:function(){return X},ks:function(){return f},m3:function(){return r},mC:function(){return d},mr:function(){return T},oC:function(){return S},pF:function(){return C},qM:function(){return x},z8:function(){return U}});var l=s(9613);const a=e=>l.Z.post("/upload",e),r=e=>l.Z.post("/login",e),i=e=>l.Z.post("/rest/categories",e),o=()=>l.Z.get("/rest/categories"),n=e=>l.Z.get(`/rest/categories/${e}`),c=(e,t)=>l.Z.put(`/rest/categories/${t}`,e),u=e=>l.Z["delete"](`/rest/categories/${e}`),m=e=>l.Z.post("/rest/items",e),d=()=>l.Z.get("/rest/items"),p=e=>l.Z.get(`/rest/items/${e}`),f=(e,t)=>l.Z.put(`/rest/items/${t}`,e),b=e=>l.Z["delete"](`/rest/items/${e}`),h=e=>l.Z.post("/rest/heroes",e),v=()=>l.Z.get("/rest/heroes"),g=e=>l.Z.get(`/rest/heroes/${e}`),k=(e,t)=>l.Z.put(`/rest/heroes/${t}`,e),$=e=>l.Z["delete"](`/rest/heroes/${e}`),x=e=>l.Z.post("/rest/articles",e),y=()=>l.Z.get("/rest/articles"),Z=e=>l.Z.get(`/rest/articles/${e}`),_=(e,t)=>l.Z.put(`/rest/articles/${t}`,e),w=e=>l.Z["delete"](`/rest/articles/${e}`),C=e=>l.Z.post("/rest/ads",e),T=()=>l.Z.get("/rest/ads"),A=e=>l.Z.get(`/rest/ads/${e}`),H=(e,t)=>l.Z.put(`/rest/ads/${t}`,e),S=e=>l.Z["delete"](`/rest/ads/${e}`),z=e=>l.Z.post("/rest/admin_users",e),X=()=>l.Z.get("/rest/admin_users"),I=e=>l.Z.get(`/rest/admin_users/${e}`),M=(e,t)=>l.Z.put(`/rest/admin_users/${t}`,e),U=e=>l.Z["delete"](`/rest/admin_users/${e}`)}}]);
//# sourceMappingURL=311.7f86f441.js.map